### 10.1 시스템 간 강결합 문제
- 도메인에서 외부 서비스를 호출하면 다음과 같은 문제점이 발생할 수 있다.
- - 외부 서비스가 정상이 아닐 경우의 트랜잭션 처리
- - 외부 서비스의 성능에 대한 문제
- - 설계 상 문제

- 이런 문제들은 시스템 간 강결합에 의해 나타나는 문제점이다. 이벤트를 이용하면 이런 강결합을 제거할 수 있다.

### 10.2 이벤트 개요
- 이벤트는 '과거에 일어난 일'을 의미한다.
- 주문을 취소하면 '주문 취소 이벤트'가 발생한다.
- 이벤트가 발생하면 상태가 변경됐다는 의미이며, 특정 이벤트 핸들러가 그 이벤트를 감지해 처리할 수 있다.
- 이벤트 디스패처는 이벤트 생성 주체(도메인 레이어)와 이벤트 핸들러 사이에서 이벤트를 전달해준다.
- 이벤트 디스패처는 구현에 따라 이벤트 생성과 처리를 동기와 비동기로 실행할 수 있다.
- 이벤트는 크게 두 가지 용도로 쓰인다.
- 첫 번째는 도메인의 상태가 바뀔 때 후처리를 위한 트리거로 사용할 수 있다.
- 두 번째는 서로 다른 시스템 간의 데이터 동기화로 사용할 수 있다.
- 이벤트의 장점은 다음과 같다.
- 도메인 로직이 섞이는 것을 방지할 수 있다.
- 기능 확장에 용이하다. 기능을 확장해도 도메인 로직을 수정할 필요가 없다.

### 10.3 이벤트 구현
- 이벤트는 다음과 같은 정보를 가진다.
- - 이벤트 종류
- - 이벤트 발생 시간
- - 필요한 추가 데이터
- 이벤트를 정의하는 클래스의 이름은 과거 시제로 작성한다.
- 이벤트는 이벤트 핸들러가 작업을 수행하는데 필요한 최소한의 데이터만 포함한다.

### 10.4 이벤트 용도
- 외부 시스템과의 연동을 동기로 처리할 때 발생하는 성능과 트랜잭션 범위 문제를 해소하는 방법은 이벤트를 비동기로 처리하거나 이벤트와 트랜잭션을 연계하는 것이다.

### 10.5 비동기 이벤트 처리
- 이벤트를 비동기로 구현할 수 있는 방법은 다양한데, 여기선 다음 네 가지 방식을 다룬다.
- - 로컬 핸들러를 비동기로 실행
- - 메시지 큐를 사용
- - 이벤트 저장소와 이벤트 포워더 사용
- - 이벤트 저장소와 이벤트 제공 API 사용

### 10.6 이벤트 적용 시 추가 고려 사항
- 이벤트를 구현할 때 추가로 고려할 점이 있다.
- - EventEntry에 이벤트 발생 주체에 대한 정보를 포함할 것인지
- - 포워더에서 전송 실패를 얼마나 허용할 것인지
- - 이벤트 손실을 어떻게 다룰 것인지
- - 이벤트 순서
- - 이벤트 재처리
- 트랜잭션이 성공한 뒤 이벤트 처리를 할 수 있게 해주는 @TranscationalEventListener를 사용하면 트랜잭션과 이벤트 처리를 더 쉽게 할 수 있다. 